<!DOCTYPE html>
<html lang="it">
<head>
<meta charset="UTF-8">
<title>Escape Room - Stanza 1</title>

<style>
body{
    font-family:Arial, sans-serif;
    background:#f4f4f4;
    text-align:center;
}

.container{
    width:80%;
    margin:auto;
}

.image-wrapper{
    position:relative;
    display:inline-block;
    width:70%;
}

.image-wrapper img{
    width:100%;
    height:auto;
    display:block;
    border-radius:10px;
}

/* HOTSPOT */
.hotspot{
    position:absolute;
    width:28px;
    height:28px;
    border-radius:50%;
    background:#fff;
    border:2px solid #ccc;
    cursor:pointer;
    transform:translate(-50%,-50%);
    transition:.2s ease;
    z-index:5;
}

.hotspot:hover{
    transform:translate(-50%,-50%) scale(1.15);
    box-shadow:0 0 8px rgba(0,0,0,.3);
}

.hotspot::after{
    content:"";
    position:absolute;
    top:50%;
    left:50%;
    width:10px;
    height:10px;
    background:#555;
    border-radius:50%;
    transform:translate(-50%,-50%);
}

/* BOX IKEA STYLE */
.tooltip{
    position:absolute;
    min-width:220px;
    max-width:260px;
    background:#fff;
    padding:15px;
    border-radius:12px;
    box-shadow:0 8px 25px rgba(0,0,0,.25);
    font-size:14px;
    text-align:left;
    opacity:0;
    visibility:hidden;
    transform:translate(-50%, -120%) scale(.95);
    transition:.2s ease;
    z-index:10;
}

.tooltip.active{
    opacity:1;
    visibility:visible;
    transform:translate(-50%, -130%) scale(1);
}

.tooltip a{
    display:block;
    margin-top:10px;
    font-weight:bold;
    color:#1a73e8;
    text-decoration:underline;
}
</style>
</head>

<body>

<div class="container">
<h1>Stanza 1</h1>
<p>Per la ricetta della carbonara c’è un ingrediente di troppo… individualo!</p>

<div class="image-wrapper">

<img src="carbonara.jpg" alt="Carbonara">

<div class="hotspot"
     style="top:62%; left:32%;"
     data-testo="Spaghetti: 400g di pasta lunga, base fondamentale della carbonara."
     data-link="prosegui.html"></div>

<div class="hotspot"
     style="top:45%; left:60%;"
     data-testo="Guanciale: rosolato fino a diventare croccante, ingrediente chiave."
     data-link="prosegui.html"></div>

<div class="hotspot"
     style="top:30%; left:42%;"
     data-testo="Uova: solo tuorli, cremosi e ricchi, fondamentali per la crema."
     data-link="prosegui.html"></div>

<div class="hotspot"
     style="top:72%; left:48%;"
     data-testo="Pecorino Romano: sapore deciso, grattugiato fine, indispensabile."
     data-link="prosegui.html"></div>

<div class="hotspot"
     style="top:20%; left:70%;"
     data-testo="Panna: ingrediente NON previsto nella carbonara tradizionale!"
     data-link="errore.html"></div>

</div>

</div>

<script>
document.addEventListener("DOMContentLoaded", function(){

let activeTooltip=null;

document.querySelectorAll(".hotspot").forEach(function(h){

    const tooltip=document.createElement("div");
    tooltip.className="tooltip";
    tooltip.innerHTML=
        h.dataset.testo+
        '<a href="'+encodeURI(h.dataset.link)+'">Scegli questo ingrediente</a>';

    h.parentElement.appendChild(tooltip);

    function openTooltip(){
        if(activeTooltip && activeTooltip!==tooltip){
            activeTooltip.classList.remove("active");
        }
        tooltip.style.top=h.style.top;
        tooltip.style.left=h.style.left;
        tooltip.classList.add("active");
        activeTooltip=tooltip;
    }

    h.addEventListener("click",function(e){
        e.stopPropagation();
        if(tooltip.classList.contains("active")){
            tooltip.classList.remove("active");
            activeTooltip=null;
        }else{
            openTooltip();
        }
    });

});

document.addEventListener("click",function(){
    if(activeTooltip){
        activeTooltip.classList.remove("active");
        activeTooltip=null;
    }
});

});
</script>

</body>
</html>
