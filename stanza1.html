<!DOCTYPE html>
<html lang="it">
<head>
<meta charset="UTF-8">
<title>Escape Room - Stanza 1</title>

<style>
body{
    font-family:Arial, sans-serif;
    background:#f4f4f4;
    text-align:center;
}

.container{
    width:80%;
    margin:auto;
}

.image-wrapper{
    position:relative;
    display:inline-block;
    width:70%;
}

.image-wrapper img{
    width:100%;
    height:auto;
    display:block;
    border-radius:10px;
}

/* HOTSPOT */
.hotspot{
    position:absolute;
    width:28px;
    height:28px;
    border-radius:50%;
    background:#ffffff;
    border:2px solid #ccc;
    cursor:pointer;
    transform:translate(-50%,-50%);
    transition:transform .2s ease;
    z-index:3;
}

.hotspot:hover{
    transform:translate(-50%,-50%) scale(1.15);
}

.hotspot::after{
    content:"";
    position:absolute;
    top:50%;
    left:50%;
    width:10px;
    height:10px;
    background:#555;
    border-radius:50%;
    transform:translate(-50%,-50%);
}

/* LABEL */
.label{
    position:absolute;
    transform:translate(-50%,-180%);
    background:rgba(255,255,255,.95);
    padding:4px 8px;
    border-radius:6px;
    font-size:12px;
    border:1px solid #ddd;
    pointer-events:none; /* fondamentale */
    z-index:2;
}

/* BOX */
#descrizione{
    margin:25px auto 0 auto;
    width:60%;
    background:#fff;
    padding:20px;
    border-radius:12px;
    box-shadow:0 0 12px rgba(0,0,0,.15);
    font-size:18px;
    color:#333;
    opacity:0;
    visibility:hidden;
    transform:translateY(10px);
    transition:all .25s ease;
}

#descrizione.active{
    opacity:1;
    visibility:visible;
    transform:translateY(0);
}

.linkbox{
    margin-top:12px;
    font-weight:bold;
}

.linkbox a{
    color:#1a73e8;
    text-decoration:underline;
}
</style>
</head>

<body>

<div class="container">
<h1>Stanza 1</h1>
<p>Per la ricetta della carbonara c’è un ingrediente di troppo… individualo!</p>

<div class="image-wrapper">

<img src="carbonara.jpg" alt="Carbonara">

<div class="hotspot"
     style="top:62%; left:32%;"
     data-testo="Spaghetti: 400g di pasta lunga, base fondamentale della carbonara."
     data-link="prosegui.html"></div>
<div class="label" style="top:62%; left:32%;">Spaghetti</div>

<div class="hotspot"
     style="top:45%; left:60%;"
     data-testo="Guanciale: rosolato fino a diventare croccante, ingrediente chiave."
     data-link="prosegui.html"></div>
<div class="label" style="top:45%; left:60%;">Guanciale</div>

<div class="hotspot"
     style="top:30%; left:42%;"
     data-testo="Uova: solo tuorli, cremosi e ricchi, fondamentali per la crema."
     data-link="prosegui.html"></div>
<div class="label" style="top:30%; left:42%;">Uova</div>

<div class="hotspot"
     style="top:72%; left:48%;"
     data-testo="Pecorino Romano: sapore deciso, grattugiato fine, indispensabile."
     data-link="prosegui.html"></div>
<div class="label" style="top:72%; left:48%;">Pecorino</div>

<div class="hotspot"
     style="top:20%; left:70%;"
     data-testo="Panna: ingrediente NON previsto nella carbonara tradizionale!"
     data-link="errore.html"></div>
<div class="label" style="top:20%; left:70%;">Panna</div>

</div>

<div id="descrizione"></div>
</div>

<script>
document.addEventListener("DOMContentLoaded", function(){

const hotspots=document.querySelectorAll(".hotspot");
const box=document.getElementById("descrizione");

function mostraBox(testo,link){
    if(box.classList.contains("active") && box.dataset.contenuto===testo){
        chiudiBox();
        return;
    }

    box.innerHTML=
        testo+
        '<div class="linkbox">'+
        '<a href="'+encodeURI(link)+'">Scegli questo ingrediente</a>'+
        '</div>';

    box.dataset.contenuto=testo;
    box.classList.add("active");
}

function chiudiBox(){
    box.classList.remove("active");
}

hotspots.forEach(function(h){
    h.addEventListener("click",function(e){
        e.stopPropagation();
        mostraBox(h.dataset.testo,h.dataset.link);
    });

    h.addEventListener("mouseenter",function(){
        mostraBox(h.dataset.testo,h.dataset.link);
    });
});

document.addEventListener("click",function(e){
    if(!e.target.closest(".hotspot") && !e.target.closest("#descrizione")){
        chiudiBox();
    }
});

});
</script>

</body>
</html>
