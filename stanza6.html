<!DOCTYPE html>
<html lang="it">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Stanza 6</title>

<style>
html, body{
margin:0;
height:100%;
font-family:Arial;
color:white;
text-align:center;
overflow-x:hidden;
background:#2b1d14;
}

/* ===== SFONDO FOTO ===== */
.bg{
position:fixed;
top:0;
left:0;
width:100%;
height:100%;
background-image:url("sfondo_legge.jpg");
background-repeat:no-repeat;
background-position:center center;
background-size:cover;
z-index:-3;

/* Biblioteca: pi√π chiaro e caldo */
filter:brightness(1.08) contrast(1.08) saturate(1.1);
}

/* Overlay: leggero e ‚Äúsoft‚Äù */
.overlay{
position:fixed;
top:0;
left:0;
width:100%;
height:100%;
background:linear-gradient(
  rgba(0,0,0,0.18),
  rgba(0,0,0,0.32)
);
z-index:-2;
}

/* ===== CONTENUTO ===== */
.main{
min-height:100vh;
display:flex;
flex-direction:column;
align-items:center;
justify-content:flex-start;
padding:20px 10px;
box-sizing:border-box;
}

h1{
margin-top:10px;
font-size:28px;
text-shadow:0 3px 10px rgba(0,0,0,0.5);
}

p{
max-width:720px;
opacity:.95;
margin-top:8px;
margin-bottom:18px;
text-shadow:0 2px 10px rgba(0,0,0,0.55);
}

/* QUIZ BOX */
.quiz-box{
width:92%;
max-width:680px;
background:rgba(0,0,0,0.35);
border:1px solid rgba(255,255,255,0.22);
border-radius:18px;
padding:18px;
backdrop-filter:blur(7px);
box-shadow:0 12px 35px rgba(0,0,0,0.45);
}

/* DOMANDA */
.question{
font-size:18px;
font-weight:bold;
margin-bottom:14px;
line-height:1.35;
}

/* RISPOSTE */
.answers{
display:flex;
flex-direction:column;
gap:10px;
}

.answer{
border:none;
border-radius:14px;
padding:14px;
font-size:15px;
font-weight:bold;
cursor:pointer;
color:white;
text-align:left;
transition:.2s;
background:rgba(255,255,255,0.14);
border:1px solid rgba(255,255,255,0.22);
}

.answer:hover{
transform:scale(1.02);
background:rgba(255,255,255,0.22);
}

.answer.correct{
background:rgba(40,167,69,0.9);
animation:pop .25s ease;
}

.answer.wrong{
background:rgba(220,53,69,0.9);
animation:shake .35s;
}

.feedback{
margin-top:12px;
font-weight:bold;
min-height:26px;
opacity:.95;
}

.progress{
margin-top:12px;
font-size:14px;
opacity:.85;
}

/* Animazioni */
@keyframes shake{
0%{transform:translateX(0);}
25%{transform:translateX(-6px);}
50%{transform:translateX(6px);}
75%{transform:translateX(-6px);}
100%{transform:translateX(0);}
}

@keyframes pop{
0%{transform:scale(.85);}
100%{transform:scale(1);}
}

/* Mobile */
@media (max-width:768px){
h1{font-size:22px;}
.question{font-size:16px;}
.answer{font-size:14px;padding:12px;}
.quiz-box{padding:14px;}
}
</style>
</head>

<body>

<div class="bg"></div>
<div class="overlay"></div>

<div class="main">

<h1>‚öñÔ∏è Stanza 6</h1>
<p>Rispondi correttamente a tutte le domande sulle fonti del diritto per proseguire.</p>

<div class="quiz-box">
<div class="question" id="question"></div>
<div class="answers" id="answers"></div>
<div class="feedback" id="feedback"></div>
<div class="progress" id="progress"></div>
</div>

</div>

<script>
const questions = [
{
q: "Qual √® la fonte normativa pi√π importante nell‚Äôordinamento italiano?",
options: [
"üìò Legge ordinaria",
"üìë Regolamento",
"üìú Costituzione",
"üîÅ Consuetudine (prassi)"
],
correctIndex: 2
},
{
q: "Qual √® la fonte con valore gerarchico pi√π basso?",
options: [
"üìú Costituzione",
"üìò Legge ordinaria",
"üîÅ Consuetudine (prassi)",
"üìë Regolamento"
],
correctIndex: 2
},
{
q: "Se una legge ordinaria √® in contrasto con la Costituzione:",
options: [
"Pu√≤ essere dichiarata incostituzionale",
"La Costituzione perde valore",
"Vale la legge pi√π recente",
"Decide il Sindaco"
],
correctIndex: 0
},
{
q: "I regolamenti sono emanati principalmente da:",
options: [
"Il Governo / Pubblica Amministrazione",
"I cittadini",
"La Corte Costituzionale",
"I Tribunali ordinari"
],
correctIndex: 0
}
];

let current=0;
let locked=false;

const questionEl=document.getElementById("question");
const answersEl=document.getElementById("answers");
const feedbackEl=document.getElementById("feedback");
const progressEl=document.getElementById("progress");

shuffle(questions);
renderQuestion();

function shuffle(array){
for(let i=array.length-1;i>0;i--){
const j=Math.floor(Math.random()*(i+1));
[array[i],array[j]]=[array[j],array[i]];
}
}

function renderQuestion(){

locked=false;
feedbackEl.textContent="";

const q=questions[current];
questionEl.textContent=q.q;
progressEl.textContent=`Domanda ${current+1} di ${questions.length}`;
answersEl.innerHTML="";

const indexed=q.options.map((text,idx)=>({text,idx}));
shuffle(indexed);

indexed.forEach(obj=>{
const btn=document.createElement("button");
btn.className="answer";
btn.textContent=obj.text;

btn.addEventListener("click",()=>{
if(locked)return;
locked=true;

if(obj.idx===q.correctIndex){
btn.classList.add("correct");
feedbackEl.textContent="‚úÖ Corretto!";
setTimeout(()=>{
current++;
if(current>=questions.length){
window.location.href="stanza7.html";
}else{
renderQuestion();
}
},650);
}else{
btn.classList.add("wrong");
feedbackEl.textContent="‚ùå Sbagliato! Riprova.";
setTimeout(()=>{
renderQuestion();
},700);
}
});

answersEl.appendChild(btn);
});
}
</script>

</body>
</html>
