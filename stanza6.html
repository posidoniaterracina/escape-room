<!DOCTYPE html>
<html lang="it">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Stanza 7</title>

<style>
html, body{
height:100%;
margin:0;
overflow-x:hidden;
}

body{
font-family:Arial;
color:white;
text-align:center;

background-image:url("sfondo_legge.jpg");
background-size:cover;
background-position:center;
background-attachment:fixed;

position:relative;
}

/* overlay scuro per leggibilit√† */
body::before{
content:"";
position:absolute;
top:0;
left:0;
width:100%;
height:100%;
background:rgba(0,0,0,0.65);
z-index:0;
}

.main{
position:relative;
z-index:1;
min-height:100vh;
display:flex;
flex-direction:column;
align-items:center;
justify-content:flex-start;
padding:20px 10px;
box-sizing:border-box;
}

h1{
margin-top:10px;
font-size:28px;
}

p{
max-width:720px;
opacity:.92;
margin-top:8px;
margin-bottom:18px;
}

/* BOX QUIZ */
.quiz-box{
width:92%;
max-width:680px;
background:rgba(255,255,255,0.12);
border:1px solid rgba(255,255,255,0.25);
border-radius:18px;
padding:18px;
backdrop-filter:blur(6px);
box-shadow:0 10px 30px rgba(0,0,0,0.35);
}

/* DOMANDA */
.question{
font-size:18px;
font-weight:bold;
margin-bottom:14px;
line-height:1.35;
}

/* RISPOSTE */
.answers{
display:flex;
flex-direction:column;
gap:10px;
}

.answer{
border:none;
border-radius:14px;
padding:14px 14px;
font-size:15px;
font-weight:bold;
cursor:pointer;
color:white;
text-align:left;
transition:.2s;
background:rgba(255,255,255,0.14);
border:1px solid rgba(255,255,255,0.18);
}

.answer:hover{
transform:scale(1.01);
background:rgba(255,255,255,0.20);
}

.answer:active{
transform:scale(0.99);
}

/* STATI */
.answer.correct{
background:rgba(40,167,69,0.85);
border-color:rgba(255,255,255,0.35);
animation:pop .25s ease;
}

.answer.wrong{
background:rgba(220,53,69,0.85);
border-color:rgba(255,255,255,0.35);
animation:shake .35s;
}

/* FEEDBACK */
.feedback{
margin-top:14px;
font-weight:bold;
min-height:26px;
opacity:.95;
}

/* PROGRESS */
.progress{
margin-top:14px;
font-size:14px;
opacity:.85;
}

/* ANIMAZIONI */
@keyframes shake{
0%{transform:translateX(0);}
25%{transform:translateX(-6px);}
50%{transform:translateX(6px);}
75%{transform:translateX(-6px);}
100%{transform:translateX(0);}
}

@keyframes pop{
0%{transform:scale(.85);}
100%{transform:scale(1);}
}

/* MOBILE */
@media (max-width:768px){

h1{
font-size:22px;
}

.question{
font-size:16px;
}

.answer{
font-size:14px;
padding:12px 12px;
}

.quiz-box{
padding:14px;
}
}
</style>
</head>

<body>

<div class="main">

<h1>‚öñÔ∏è Stanza 7</h1>
<p>Rispondi correttamente a tutte le domande per sbloccare la stanza successiva. Attenzione: una risposta sbagliata ti fa riprovare la domanda!</p>

<div class="quiz-box">

<div class="question" id="question"></div>

<div class="answers" id="answers"></div>

<div class="feedback" id="feedback"></div>

<div class="progress" id="progress"></div>

</div>

</div>

<script>
const questions = [
  {
    q: "üìå Qual √® la fonte normativa pi√π importante nell‚Äôordinamento italiano?",
    options: [
      "üìò Legge ordinaria",
      "üëë Costituzione",
      "üìë Regolamento",
      "üîÅ Consuetudine (prassi)"
    ],
    correctIndex: 1
  },
  {
    q: "üìå Tra queste, quale ha valore pi√π basso nella gerarchia delle fonti?",
    options: [
      "üìò Legge ordinaria",
      "üìë Regolamento",
      "üîÅ Consuetudine (prassi)",
      "üëë Costituzione"
    ],
    correctIndex: 2
  },
  {
    q: "üìå Se una legge ordinaria √® in contrasto con la Costituzione, cosa succede?",
    options: [
      "‚úÖ Pu√≤ essere dichiarata incostituzionale",
      "üìå La Costituzione perde valore",
      "üìå La legge resta valida perch√© √® pi√π recente",
      "üìå Decide il Comune"
    ],
    correctIndex: 0
  },
  {
    q: "üìå I regolamenti sono emanati principalmente da:",
    options: [
      "üèõÔ∏è Il Governo / la Pubblica Amministrazione",
      "üë• Il popolo tramite referendum",
      "‚öñÔ∏è La Corte Costituzionale",
      "üì∞ I giornali"
    ],
    correctIndex: 0
  }
];

let current = 0;
let locked = false;

const questionEl = document.getElementById("question");
const answersEl  = document.getElementById("answers");
const feedbackEl = document.getElementById("feedback");
const progressEl = document.getElementById("progress");

shuffleQuestions();
renderQuestion();

function shuffleQuestions(){
  for(let i = questions.length - 1; i > 0; i--){
    const j = Math.floor(Math.random() * (i + 1));
    [questions[i], questions[j]] = [questions[j], questions[i]];
  }
}

function renderQuestion(){

  locked = false;
  feedbackEl.textContent = "";

  const q = questions[current];

  questionEl.textContent = q.q;
  progressEl.textContent = `Domanda ${current + 1} di ${questions.length}`;

  answersEl.innerHTML = "";

  // shuffle opzioni ma mantenendo indice corretto
  const indexed = q.options.map((text, idx)=>({text, idx}));
  for(let i = indexed.length - 1; i > 0; i--){
    const j = Math.floor(Math.random() * (i + 1));
    [indexed[i], indexed[j]] = [indexed[j], indexed[i]];
  }

  indexed.forEach(obj=>{
    const btn = document.createElement("button");
    btn.className = "answer";
    btn.textContent = obj.text;

    btn.addEventListener("click", ()=>{
      if(locked) return;
      locked = true;

      const isCorrect = (obj.idx === q.correctIndex);

      if(isCorrect){
        btn.classList.add("correct");
        feedbackEl.textContent = "‚úÖ Corretto! Avanti...";
        setTimeout(()=>{
          current++;
          if(current >= questions.length){
            winRoom();
          }else{
            renderQuestion();
          }
        }, 650);

      }else{
        btn.classList.add("wrong");
        feedbackEl.textContent = "‚ùå Sbagliato! Riprova la stessa domanda.";
        setTimeout(()=>{
          renderQuestion();
        }, 700);
      }
    });

    answersEl.appendChild(btn);
  });
}

function winRoom(){
  feedbackEl.textContent = "üéâ Perfetto! Stanza sbloccata...";
  setTimeout(()=>{
    window.location.href = "stanza8.html";
  }, 900);
}
</script>

</body>
</html>
