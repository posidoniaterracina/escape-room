<!DOCTYPE html>
<html lang="it">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Drag & Drop Vini Italiani</title>

<style>
body{
    font-family: Georgia, serif;
    text-align:center;
    background:#ececec;
    overflow-x:hidden;
}

h1{ margin-top:20px; }

.row{
    display:flex;
    justify-content:center;
    gap:60px;
    margin-top:40px;
}

/* Bottiglia */
.bottle{
    position:relative;
    width:75px;
    height:260px;
}

.neck{
    position:absolute;
    top:0;
    left:50%;
    transform:translateX(-50%);
    width:22px;
    height:95px;
    background:#1c1c1c;
    border-radius:12px;
}

.body{
    position:absolute;
    bottom:0;
    width:75px;
    height:150px;
    background:linear-gradient(to bottom,#2e2e2e,#1a1a1a);
    border-radius:40px 40px 15px 15px;
    display:flex;
    flex-direction:column;
    align-items:center;
    padding-top:25px;
}

.region{
    color:white;
    font-weight:bold;
    font-size:11px;
    margin-bottom:10px;
}

.dropzone{
    width:55px;
    height:45px;
    background:#f8f5e6;
    border:1px solid #c6a84f;
    border-radius:4px;
    font-size:9px;
    display:flex;
    align-items:center;
    justify-content:center;
    text-align:center;
}

/* Etichette */
.labels{
    margin-top:60px;
    display:flex;
    justify-content:center;
    gap:20px;
    flex-wrap:wrap;
}

.label{
    width:140px;
    height:80px;
    background:#f8f5e6;
    border:3px solid #c6a84f;
    border-radius:8px;
    display:flex;
    flex-direction:column;
    justify-content:center;
    align-items:center;
    box-shadow:0 6px 15px rgba(0,0,0,0.3);
    position:relative;
    touch-action:none;
}

.label h3{
    margin:0;
    font-size:14px;
}

.label span{
    font-size:9px;
    color:#444;
}
</style>
</head>
<body>

<h1>Abbina il vino alla regione corretta</h1>

<div class="row">
    <div class="bottle">
        <div class="neck"></div>
        <div class="body">
            <div class="region">Piemonte</div>
            <div class="dropzone" data-correct="Barolo"></div>
        </div>
    </div>
    <div class="bottle">
        <div class="neck"></div>
        <div class="body">
            <div class="region">Veneto</div>
            <div class="dropzone" data-correct="Amarone"></div>
        </div>
    </div>
</div>

<div class="row">
    <div class="bottle">
        <div class="neck"></div>
        <div class="body">
            <div class="region">Toscana</div>
            <div class="dropzone" data-correct="Chianti"></div>
        </div>
    </div>
    <div class="bottle">
        <div class="neck"></div>
        <div class="body">
            <div class="region">Sicilia</div>
            <div class="dropzone" data-correct="Nero d'Avola"></div>
        </div>
    </div>
</div>

<div class="labels">
    <div class="label" data-name="Chianti">
        <h3>CHIANTI</h3>
        <span>DOCG</span>
    </div>
    <div class="label" data-name="Barolo">
        <h3>BAROLO</h3>
        <span>DOCG</span>
    </div>
    <div class="label" data-name="Amarone">
        <h3>AMARONE</h3>
        <span>Valpolicella DOCG</span>
    </div>
    <div class="label" data-name="Nero d'Avola">
        <h3>NERO D'AVOLA</h3>
        <span>Sicilia DOC</span>
    </div>
</div>

<script>
let dragged = null;
let offsetX = 0;
let offsetY = 0;
let score = 0;

const labels = document.querySelectorAll(".label");
const dropzones = document.querySelectorAll(".dropzone");

labels.forEach(label => {

    label.addEventListener("pointerdown", e => {
        dragged = label;
        offsetX = e.offsetX;
        offsetY = e.offsetY;
        label.style.position = "absolute";
        label.style.zIndex = 1000;
    });

});

document.addEventListener("pointermove", e => {
    if(!dragged) return;
    dragged.style.left = (e.pageX - offsetX) + "px";
    dragged.style.top = (e.pageY - offsetY) + "px";
});

document.addEventListener("pointerup", e => {
    if(!dragged) return;

    let correctDrop = false;

    dropzones.forEach(zone => {
        const rect = zone.getBoundingClientRect();
        if(
            e.clientX > rect.left &&
            e.clientX < rect.right &&
            e.clientY > rect.top &&
            e.clientY < rect.bottom &&
            zone.textContent === ""
        ){
            if(dragged.dataset.name === zone.dataset.correct){
                zone.innerHTML = "<strong>"+dragged.dataset.name+"</strong>";
                dragged.remove();
                score++;
                correctDrop = true;

                if(score === 4){
                    window.location.href="stanza11.html";
                }
            }
        }
    });

    if(!correctDrop){
        dragged.style.position = "relative";
        dragged.style.left = "0";
        dragged.style.top = "0";
    }

    dragged = null;
});
</script>

</body>
</html>
